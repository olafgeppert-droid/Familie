
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wappenringe der Familie GEPPERT</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="header-inner">
      <img class="crest" src="wappen.jpeg" alt="Wappen" onerror="this.classList.add('hide')">
      <h1>Wappenringe der Familie GEPPERT</h1>
      <img class="crest" src="wappen.jpeg" alt="Wappen" onerror="this.classList.add('hide')">
    </div>
    <div class="ribbon">
      <div class="row row1">
        <button id="btnNew" class="btn">🆕 Neue Person</button>
        <button id="btnDelete" class="btn">🗑️ Person löschen</button>
        <button id="btnImport" class="btn">⬆️ Import</button>
        <button id="btnExport" class="btn">⬇️ Export</button>
        <button id="btnPrint" class="btn">🖨️ Drucken</button>
        <button id="btnStats" class="btn">📊 Statistik</button>
        <button id="btnUndo" class="btn">↩️ Rückgängig</button>
        <button id="btnRedo" class="btn">↪️ Wiederholen</button>
        <span class="spacer"></span>
        <button id="btnHelp" class="btn help">❓ Hilfe</button>
      </div>
      <div class="row row2">
        <div class="search">
          <input id="search" type="search" placeholder="Suche (Name/Code)">
        </div>
      </div>
    </div>
  </header>

  <section class="hint-wrap">
    <p class="hint">
      Personen- und Ring-Code werden vom Programm vergeben. Denke daran, die Datenbank durch Export als JSON-Datei in deinem Backup-Verzeichnis zu sichern.
    </p>
  </section>

  <main class="content">
    <div class="table-wrap" id="tableWrap">
      <table id="peopleTable">
        <thead>
          <tr>
            <th>Gen</th>
            <th>Code</th>
            <th>Ring-Code</th>
            <th>Name</th>
            <th>Geburtsdatum</th>
            <th>Geburtsort</th>
            <th>Geschlecht</th>
            <th>Eltern-Code</th>
            <th>Partner-Code</th>
            <th>Geerbt von</th>
            <th>Kommentar</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="treePanel" class="tree-panel" aria-label="Stammbaum">
      <!-- SVG wird dynamisch erzeugt -->
    </div>
  </main>

  <!-- Drucken-Dialog -->
  <dialog id="printDlg">
    <form method="dialog" class="dlg">
      <h3>Drucken</h3>
      <label><input type="radio" name="what" value="table" checked> Nur Tabelle</label>
      <label><input type="radio" name="what" value="tree"> Nur Stammbaum</label>
      <label><input type="radio" name="what" value="both"> Beides</label>
      <div class="actions">
        <button value="cancel" class="btn">Abbrechen</button>
        <button id="printGo" value="ok" class="btn primary">PDF erzeugen</button>
      </div>
    </form>
  </dialog>

  <!-- Hilfe-Dialog -->
  <dialog id="helpDlg">
    <div class="dlg help-content">
      <div class="dlg-head">
        <h3>Hilfe & Anleitung</h3>
        <button id="helpClose" class="icon-x" title="Schließen">×</button>
      </div>
      <div class="dlg-body">
        <p>Die Anwendung verwaltet Personen und Stammbaum. Exportiere regelmäßig als JSON zur Sicherung.</p>
      </div>
      <div class="actions">
        <button id="helpClose2" class="btn">Schließen</button>
      </div>
    </div>
  </dialog>

  <!-- Person bearbeiten/neu -->
  <dialog id="personDlg">
    <form method="dialog" class="dlg">
      <h3 id="personDlgTitle">Neue Person</h3>
      <div class="grid">
        <label>Name<input id="p_name" required></label>
        <label>Geburtsdatum (TT.MM.JJJJ)<input id="p_birth" placeholder="TT.MM.JJJJ" pattern="^\d{2}\.\d{2}\.\d{4}$"></label>
        <label>Geburtsort<input id="p_place"></label>
        <label>Geschlecht<select id="p_gender"><option value="">—</option><option value="m">m</option><option value="w">w</option><option value="d">d</option></select></label>
        <label>Eltern-Code<input id="p_parent" placeholder="z. B. 1A"></label>
        <label>Partner-Code<input id="p_partner" placeholder="z. B. 1Ax"></label>
        <label>Geerbt von<input id="p_inh" placeholder="Code des Erblassers"></label>
        <label>Kommentar<input id="p_comment"></label>
      </div>
      <div class="actions">
        <button value="cancel" class="btn">Abbrechen</button>
        <button id="personSave" value="ok" class="btn primary">Speichern</button>
      </div>
    </form>
  </dialog>

  <!-- Libs -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
