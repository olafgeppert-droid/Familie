<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Wappenringe der Familie GEPPERT</title>
<link href="styles.css" rel="stylesheet"/>
</head>
<body>
<header class="app-header"><img class="crest" src="wappen.jpeg"/><span>Wappenringe der Familie GEPPERT</span><img class="crest" src="wappen.jpeg"/></header>
<div id="autoHint" style="margin-top:6px; font-weight:700; color:#c1121f;">Der Personen-Code und der Ring-Code wird automatisch vom Programm vergeben. Die Logik wurde vom Wappenspender, Olaf Geppert, erfunden und vorgegeben. Bitte denke daran, die Datenbank durch „Export“ als „JSON-Datei“ in deinem Backup-Verzeichnis zu sichern. Du kannst sie jederzeit wieder importieren.</div>
<nav class="ribbon">
<div class="row">
<button class="accent" id="btnNew">➕ Neue Person</button>
<button id="btnDelete">🗑️ Person löschen</button>
<button id="btnImport">⤒ Import</button>
<button id="btnExport">⤓ Export</button>
<button id="btnPrint">🖨️ Drucken</button>

<button id="btnStats">📊 Statistiken</button>
<input id="txtSearch" placeholder="Person suchen (Name/Code)"/>
<button id="btnHelp">❓ Hilfe</button></div>
<div class="row">
<button class="big" id="btnUndo">↶ Rückgängig</button>
<button class="big" id="btnRedo">↷ Wiederholen</button>
<button class="danger" id="btnReset">⟲ Reset (nur Daten)</button>
</div>
</nav>
<main class="content">
<section id="paneTable">
<table id="peopleTable">
<thead>
<tr>
<th data-k="Generation">Gen</th>
<th data-k="Code">Code</th>
<th data-k="RingCode">Ring-Code</th>
<th data-k="Name">Name</th>
<th data-k="BirthDate">Geburtsdatum</th>
<th data-k="BirthPlace">Geburtsort</th>
<th data-k="Gender">Geschlecht</th>
<th data-k="ParentCode">Eltern-Code</th>
<th data-k="PartnerCode">Partner-Code</th>
<th data-k="InheritedFrom">Geerbt von</th>
<th data-k="Note">Kommentar</th>
</tr>
</thead>
<tbody></tbody>
</table>
</section>
<section id="paneTree">
<svg id="treeSvg"></svg>
</section>
</main>
<!-- Dialog: Person -->
<dialog id="dlgPerson">
<form id="frmPerson" method="dialog">
<h3>Neue/Ändern Person</h3>
<div class="grid">
<label>Code (automatisch) <input id="pCode" name="Code" readonly=""/></label>
<label>Name* <input id="pName" name="Name" required=""/></label>
<label>Geburtsdatum <input id="pBirthDate" name="BirthDate" placeholder="TT.MM.JJJJ"/></label>
<label>Geburtsort <input id="pBirthPlace" name="BirthPlace"/></label>
<label>Geschlecht
          <select id="pGender" name="Gender">
<option value="">–</option>
<option value="m">m</option>
<option value="w">w</option>
<option value="d">divers</option>
</select>
</label>
<label>Eltern-Code <input id="pParent" name="ParentCode" placeholder="z. B. 1C"/></label>
<label>Partner-Code <input id="pPartner" name="PartnerCode" placeholder="z. B. 1C1x"/></label>
<label>Geerbt von Code <input id="pInherited" name="InheritedFrom" placeholder="z. B. 1A"/></label>
<label>Kommentar <input id="pNote" name="Note"/></label>
</div>
<div class="dlg-actions">
<button value="cancel">Abbrechen</button>
<button class="accent" id="btnSavePerson" value="default">Speichern</button>
</div>
<div class="hint">* Pflichtfelder. Datum: TT.MM.JJJJ. Personen-Code &amp; Ring-Code werden automatisch vergeben.</div>
</form>
</dialog>
<dialog id="dlgDelete">
<form id="frmDelete" method="dialog">
<h3>Person löschen</h3>
<p>Bitte <b>Name</b> oder <b>Personen-Code</b> eingeben:</p>
<input id="delQuery" placeholder="z. B. 1A oder Mario"/>
<div class="dlg-actions">
<button value="cancel">Abbrechen</button>
<button class="danger" id="btnConfirmDelete" value="default">Löschen</button>
</div>
</form>
</dialog>
<dialog id="dlgStats"><div id="statsContent"></div><div class="dlg-actions"><button id="btnCloseStats">Schließen</button></div></dialog>
<script src="app.js"></script>

<dialog id="dlgExport">
<form id="frmExport" method="dialog">
<h3>Daten exportieren</h3>
<p>Wähle Formate. Optional: an iOS-Teilen-Menü übergeben.</p>
<label><input name="fmt" type="checkbox" value="json"/> JSON</label>
<label><input name="fmt" type="checkbox" value="csv"/> CSV</label>
<label style="margin-top:8px;"><input id="expShare" type="checkbox"/> An iOS / Web‑Share übergeben</label>
<div class="backup-note">Hinweis: Die Daten werden nur lokal gespeichert. Bitte regelmäßig exportieren und sichern.</div>
<div class="dlg-actions">
<button value="cancel">Abbrechen</button>
<button class="accent" id="btnDoExport" value="default">Exportieren</button>
</div>
</form>
</dialog>

<dialog id="dlgPrint">
<form id="frmPrint" method="dialog">
<h3>Drucken</h3>
<label><input checked="" name="printWhat" type="radio" value="table"/> Tabelle</label>
<label><input name="printWhat" type="radio" value="tree"/> Stammbaum</label>
<div class="dlg-actions">
<button value="cancel">Abbrechen</button>
<button class="accent" id="btnDoPrint" value="default">Drucken</button>
</div>
</form>
</dialog>

<div aria-labelledby="helpTitle" aria-modal="true" class="modal hidden" id="dlgHelp" role="dialog">
<div class="modal-content">
<button aria-label="Schließen" class="modal-close" id="btnCloseHelp">×</button>
<h3 id="helpTitle">Hilfe &amp; Anleitung</h3>
<div class="modal-body" id="helpBody">
<em>Lade Hilfe …</em>
</div>
</div>
<div class="modal-backdrop" id="helpBackdrop"></div>
</div>
</body>
</html>
