/* Basic Reset */
*{box-sizing:border-box}html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
:root{
  --blue:#0a66c2;
  --blue-soft:#e8f1fb;
  --ink:#1e293b;
  --muted:#64748b;
  --accent:#10b981;
  --danger:#dc2626;
  --row:#f8fafc;
  --row2:#eef2f7;
  --gen1:#e8f1fb;
  --gen2:#fdf6b2;
  --gen3:#fde68a;
  --gen4:#f5d0fe;
  --node:#ffffff;
  --line:#475569;
}
header#app-header{
  display:flex;align-items:center;justify-content:center;gap:1rem;
  padding:0.6rem 1rem;background:linear-gradient(180deg,#ffffff,#f4f7fb);
  border-bottom:1px solid #e5e7eb; position:sticky; top:0; z-index:5;
}
header#app-header h1{margin:0;font-size:1.6rem;color:var(--ink);text-align:center}
header#app-header img.wappen{height:48px;width:auto}
#ribbon{padding:0.5rem;border-bottom:1px solid #e5e7eb;background:#fff;position:sticky;top:64px;z-index:4}
#ribbon .row{display:flex;justify-content:center;margin:0.25rem 0}
#ribbon .group{display:flex;gap:0.35rem;flex-wrap:wrap;align-items:center}
#ribbon button{padding:0.45rem 0.7rem;border:1px solid #cbd5e1;border-radius:6px;background:#fff;cursor:pointer}
#ribbon button:hover{background:var(--blue-soft);border-color:#b6c8e6}
#ribbon button.danger{background:#fee2e2;border-color:#fecaca;color:#991b1b}
#ribbon label{color:var(--muted)}
#ribbon input#search{min-width:260px}

#hint{margin:0.5rem 1rem;color:#334155}

main{display:grid;grid-template-columns:1fr 1fr;gap:1rem;padding:1rem}
.pane{background:#fff;border:1px solid #e5e7eb;border-radius:10px;padding:0.75rem}
.pane h2{margin:0 0 0.75rem 0;color:var(--ink)}

.table-wrap{overflow:auto;max-height:45vh;border:1px solid #e5e7eb;border-radius:8px}
table{width:100%;border-collapse:collapse;font-size:0.95rem}
thead th{position:sticky;top:0;background:#f1f5f9;color:#0f172a;text-align:left;padding:0.5rem;border-bottom:1px solid #e5e7eb}
tbody td{padding:0.4rem;border-bottom:1px solid #f1f5f9;background:#fff}
tbody tr:nth-child(even) td{background:#fafafa}
mark{background:#fde68a;padding:0 2px;border-radius:2px}

#treeContainer{height:60vh;border:1px solid #e5e7eb;border-radius:8px;overflow:auto;position:relative;background:#fff}
#treeSVG{width:1600px;height:900px}
.gen-band{opacity:0.45}
.node{fill:var(--node);stroke:var(--line);stroke-width:1}
.node text{font-size:12px;fill:#111827}
.link{stroke:var(--line);stroke-width:2;fill:none}
.bus{stroke:#111827;stroke-width:2}
.partner-only{stroke-dasharray:4 3}
.line-vert{stroke:var(--line);stroke-width:2}
label, input, select{font-size:0.95rem}

dialog{border:1px solid #cbd5e1;border-radius:10px;padding:0}
dialog::backdrop{background:rgba(0,0,0,0.05)}
dialog form{padding:1rem;min-width:320px}
dialog h3{margin:0 0 0.75rem 0}
dialog .grid{display:grid;grid-template-columns:1fr 1fr;gap:0.5rem}
dialog menu{display:flex;justify-content:flex-end;gap:0.5rem;margin-top:0.75rem}
dialog .hint-fields{margin-top:0.5rem;color:var(--muted)}
dialog.help{padding:0;border:none}
dialog.help .help-body{position:relative;width:min(90vw,800px);height:min(80vh,600px);background:#fff;border-radius:10px;overflow:hidden;border:1px solid #e5e7eb}
dialog.help .help-body .close{position:absolute;right:8px;top:8px;border:1px solid #cbd5e1;background:#fff;border-radius:6px;padding:0.2rem 0.5rem;cursor:pointer}
dialog.help iframe{width:100%;height:100%;border:0}

@media print{
  header,#ribbon,#hint,dialog,.table-wrap{display:none !important}
  main{display:block}
  .pane{border:none}
  #treeContainer{height:auto;overflow:visible;border:none}
  #treeSVG{width:100% !important;height:auto}
}
